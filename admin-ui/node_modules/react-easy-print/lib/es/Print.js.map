{"version":3,"sources":["../../src/Print.jsx"],"names":["React","PropTypes","PrintProvider","debug","propTypes","name","string","children","node","isRequired","main","bool","single","exclusive","printOnly","contextTypes","childContextTypes","Print","props","state","printOffsetLeft","printOffsetTop","isSingle","context","printProvider","regPrintable","window","matchMedia","onchange","isPrint","matches","bodyRect","document","body","getBoundingClientRect","elem","printElement","elemRect","left","top","setState","unregPrintable","main_","s","_main","excl_","_exclusive","offset_","marginTop","marginLeft","globalClassName","className","root","el","Component"],"mappings":"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","file":"Print.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport PrintProvider from './PrintProvider';\nimport { debug } from './common';\nimport s from './Print.css';\n\nconst propTypes = {\n  name: PropTypes.string,\n  children: PropTypes.node.isRequired,\n  main: PropTypes.bool,\n  single: PropTypes.bool,\n  exclusive: PropTypes.bool,\n  printOnly: PropTypes.bool\n};\nconst contextTypes = PrintProvider.childContextTypes;\n\nexport default class Print extends React.Component {\n\n  constructor(props){\n    super(props);\n\n    this.state = {\n      printOffsetLeft: 0,\n      printOffsetTop: 0\n    };\n  }\n  componentDidMount() {\n\n    if (this.props.name) {\n      debug('init printable', this.props.name);\n      const isSingle = (this.props.main || this.props.single);\n      this.context.printProvider && this.context.printProvider.regPrintable(this.props.name, <Print {...this.props} />, isSingle);\n    }\n\n    if (this.props.main || this.props.single) {\n\n      window.matchMedia('print').onchange = () => {\n        const isPrint = window.matchMedia('print').matches;\n\n        if(isPrint){\n          const bodyRect = document.body.getBoundingClientRect();\n          const elem = this.printElement;\n          const elemRect = elem && elem.getBoundingClientRect();\n          const printOffsetLeft = elemRect && (elemRect.left - bodyRect.left);\n          const printOffsetTop = elemRect && (elemRect.top - bodyRect.top);\n\n          this.setState({\n            printOffsetTop,\n            printOffsetLeft,\n          });\n        }else{\n          this.setState({\n            printOffsetTop: 0,\n            printOffsetLeft: 0\n          })\n        }\n      };\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.name) {\n      debug('remove printable', this.props.name);\n      const isSingle = (this.props.main || this.props.single);\n      this.context.printProvider && this.context.printProvider.unregPrintable(this.props.name, isSingle);\n    }\n\n    if (this.props.main || this.props.single) {\n      window.matchMedia('print').onchange = null;\n    }\n  }\n\n  render() {\n\n    const { children, main, single, exclusive, printOnly } = this.props;\n    const { printOffsetLeft, printOffsetTop } = this.state;\n    const main_ = (main || single) ? s._main : '';\n    const excl_ = (exclusive || printOnly) ? s._exclusive : '';\n    const isPrint = window.matchMedia('print').matches;\n    const offset_ = ((printOffsetTop || printOffsetLeft ) && main_ && isPrint) ? { marginTop: -printOffsetTop, marginLeft: -printOffsetLeft} : {};\n    const globalClassName = 'react-easy-print-print'; // using in hiddenAll\n    const className = `${globalClassName} ${s.root} ${main_} ${excl_}`;\n    return <div ref={ (el) => this.printElement = el } style={offset_} className={className}>{children}</div>;\n  }\n}\nPrint.propTypes = propTypes;\nPrint.contextTypes = contextTypes;\n"]}